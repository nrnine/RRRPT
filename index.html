<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Independence Day ðŸ‡®ðŸ‡³</title>
  <meta name="theme-color" content="#138808" />
  <style>
    :root{
      --saffron:#FF9933; /* BHAGWA */
      --white:#ffffff;
      --green:#138808;
      --navy:#054187; /* Ashoka Chakra */
      --bg1:#0a0f1a;
      --bg2:#001b2e;
      --gold:#ffd166;
    }

    /* Global reset */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
      color:#f8fafc; overflow:hidden; background: radial-gradient(1200px 800px at 20% 0%, rgba(255,153,51,.12), transparent),
        radial-gradient(1200px 800px at 80% 100%, rgba(19,136,8,.12), transparent),
        linear-gradient(160deg,var(--bg1),var(--bg2));
    }

    /* Subtle moving light rays */
    .rays{position:fixed; inset:0; background:
      repeating-linear-gradient(60deg, rgba(255,255,255,.04) 0 2px, transparent 2px 10px);
      filter: blur(1px); mix-blend-mode: overlay; animation:rays 18s linear infinite; pointer-events:none;}
    @keyframes rays{to{background-position:2000px 0}}

    /* Fireworks Canvas covers everything but sits behind content */
    canvas#fw{position:fixed; inset:0; z-index:0; background:transparent}

    /* Layout container */
    .wrap{position:relative; z-index:2; height:100%; display:grid; place-items:center; padding:24px}

    /* Greeting Card */
    .card{
      width:min(1050px,96vw); min-height:72vh; border-radius:28px; padding:28px 28px 40px;
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.14); box-shadow:0 18px 80px rgba(0,0,0,.35);
      position:relative; overflow:hidden; isolation:isolate;
    }
    .card::after{ /* glow */
      content:""; position:absolute; inset:-2px; background:
        radial-gradient(450px 160px at 20% 0%, rgba(255,153,51,.25), transparent 60%),
        radial-gradient(450px 160px at 80% 100%, rgba(19,136,8,.25), transparent 60%);
      z-index:-1; filter: blur(18px);
    }

    .title{
      margin:0; font-size:clamp(28px, 5.2vw, 64px); line-height:1.05; text-align:center;
      font-weight:800; letter-spacing:0.2px;
      background:linear-gradient(90deg,var(--saffron),var(--white),var(--green));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow:0 2px 12px rgba(0,0,0,.25);
      animation: shimmer 3.2s ease-in-out infinite;
    }
    @keyframes shimmer{0%,100%{filter:brightness(1)}50%{filter:brightness(1.25)}}

    .subtitle{margin:.6rem auto 1.6rem; text-align:center; max-width:70ch;
      color:#dbeafe; opacity:.9; font-size:clamp(14px,2.1vw,18px)}

    /* Waving Flag Module */
    .flag-scene{display:grid; place-items:center; margin-block:14px 22px}
    .flag{
      position:relative; width:min(760px,90vw); aspect-ratio:3/2; border-radius:10px;
      transform: perspective(900px) rotateY(-8deg) rotateX(2deg);
      overflow:hidden; box-shadow:0 10px 40px rgba(0,0,0,.45);
      mask-image: radial-gradient(120% 120% at -10% 50%, black 60%, transparent 95%);
    }
    .flag .cloth{
      position:absolute; inset:0; background:
       linear-gradient(#0000 0 33.333%, rgba(0,0,0,.22) 33.5% 33.8%,#0000 34%), /* seam line */
       linear-gradient(var(--saffron) 0 33.333%, var(--white) 33.333% 66.666%, var(--green) 66.666% 100%);
      filter:contrast(1.02) saturate(1.05);
      transform-origin:left center; animation:wave 3.3s ease-in-out infinite;
    }
    /* Subtle cloth shading */
    .flag .cloth::before{content:""; position:absolute; inset:-20% -40%; background:
      radial-gradient(120% 65% at 30% 40%, rgba(255,255,255,.18), transparent 60%),
      radial-gradient(80% 60% at 70% 60%, rgba(0,0,0,.18), transparent 62%);
      mix-blend-mode: overlay;}

    /* Ashoka Chakra */
    .chakra{position:absolute; left:50%; top:50%; width:calc(90%/3); aspect-ratio:1; transform:translate(-50%,-50%);
      display:grid; place-items:center;}
    .chakra svg{width:100%; height:100%; filter: drop-shadow(0 1px 1px rgba(0,0,0,.35));
      animation: spin 14s linear infinite reverse;}

    @keyframes wave {
      0%  { transform:skewY(0.8deg) translateX(0) rotateZ(0.05deg) }
      50% { transform:skewY(-1deg) translateX(1.3%) rotateZ(-0.05deg) }
      100%{ transform:skewY(0.8deg) translateX(0) rotateZ(0.05deg) }
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Floating Balloons */
    .balloon{position:absolute; bottom:-120px; width:28px; aspect-ratio:3/4; border-radius:50% 50% 45% 55%/55% 55% 45% 45%;
      box-shadow: inset -4px -10px 14px rgba(0,0,0,.25); opacity:.95; animation:floatUp var(--t,12s) linear infinite;
      z-index:1}
    .balloon::after{content:""; position:absolute; left:50%; bottom:-26px; width:2px; height:38px; background:rgba(255,255,255,.6)}
    @keyframes floatUp { to { transform: translateY(-115vh) translateX(var(--x,0)); } }

    /* CTA row */
    .cta{display:flex; justify-content:center; gap:12px; margin-top:22px; flex-wrap:wrap}
    .btn{appearance:none; border:none; padding:12px 16px; border-radius:12px; font-weight:700; cursor:pointer;
      backdrop-filter: blur(6px); background:rgba(255,255,255,.08); color:#fff; border:1px solid rgba(255,255,255,.18);
      transition: transform .15s ease, background .2s ease;}
    .btn:hover{transform:translateY(-2px); background:rgba(255,255,255,.14)}

    /* Jai Hind badge */
    .badge{position:absolute; right:16px; bottom:14px; font-weight:900; letter-spacing:1px; padding:8px 10px;
      background:linear-gradient(90deg,var(--saffron),var(--white),var(--green));
      -webkit-background-clip:text; background-clip:text; color:transparent; text-shadow:0 1px 10px rgba(0,0,0,.35);
      animation:pop 1.6s ease-in-out infinite}
    @keyframes pop{0%,100%{transform:scale(1)} 50%{transform:scale(1.06)}}

    /* Typewriter line */
    .tw{margin-top:10px; text-align:center; font-weight:700; letter-spacing:.3px; opacity:.92}
    .cursor{display:inline-block; width:1ch; animation:blink 1s steps(1) infinite}
    @keyframes blink{50%{opacity:0}}

    /* Accessibility: reduce motion */
    @media (prefers-reduced-motion: reduce){
      .rays, .cloth, .chakra svg, .balloon, .title{animation:none}
      canvas#fw{display:none}
    }
  </style>
</head>
<body>
  <canvas id="fw" aria-hidden="true"></canvas>
  <div class="rays" aria-hidden="true"></div>

  <div class="wrap">
    <section class="card" role="region" aria-label="Independence Day Greeting">
      <h1 class="title" id="wish">Happy Independence Day</h1>
      <p class="subtitle">Celebrating the spirit of freedom, unity, and progress â€” 15 August. Wishing everyone peace, prosperity, and pride. ðŸ‡®ðŸ‡³</p>

      <div class="flag-scene" aria-hidden="false">
        <div class="flag" aria-label="Indian National Flag (Tiranga)">
          <div class="cloth"></div>
          <div class="chakra" aria-hidden="false">
            <!-- Ashoka Chakra (24 spokes) -->
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" aria-label="Ashoka Chakra">
              <defs>
                <circle id="c" cx="50" cy="50" r="40" fill="none" stroke="var(--navy)" stroke-width="4"/>
              </defs>
              <use href="#c"></use>
              <circle cx="50" cy="50" r="3.2" fill="var(--navy)"/>
              <!-- spokes -->
              <g stroke="var(--navy)" stroke-width="2" stroke-linecap="round">
                <!-- Generate 24 spokes with rotation -->
                <!-- We'll hardcode for simplicity -->
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(0 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(15 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(30 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(45 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(60 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(75 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(90 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(105 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(120 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(135 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(150 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(165 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(180 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(195 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(210 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(225 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(240 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(255 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(270 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(285 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(300 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(315 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(330 50 50)"/>
                <line x1="50" y1="50" x2="50" y2="10" transform="rotate(345 50 50)"/>
              </g>
            </svg>
          </div>
        </div>
      </div>

      <p class="tw" aria-live="polite"><span id="type"></span><span class="cursor">|</span></p>

      <div class="cta">
        <button class="btn" id="burst">ðŸŽ† Celebrate</button>
        <button class="btn" id="confetti">ðŸŽ¶ Music</button>
        <button class="btn" id="balloons">ðŸŽˆ Balloons</button>
      </div>

      <div class="badge" aria-hidden="false">JAI HIND!</div>
    </section>
  </div>

  <!-- Balloons dynamically injected here -->
  <div id="balloon-layer" aria-hidden="true" style="position:fixed; inset:0; pointer-events:none; z-index:1"></div>

  <script>
    // ===== Typewriter =====
    const line = "Wishing you a proud, joyful & peaceful Independence Day!";
    const el = document.getElementById('type');
    let i = 0; let dir = 1; // type & backspace loop
    function type(){
      el.textContent = line.slice(0, i);
      i += dir;
      if(i > line.length + 12){dir = -1}
      if(i < 0){dir = 1}
    }
    setInterval(type, 70);

    // ===== Fireworks / Confetti Canvas =====
    const canvas = document.getElementById('fw');
    const ctx = canvas.getContext('2d');
    const DPR = Math.min(devicePixelRatio || 1, 2);
    let W = 0, H = 0; let particles = []; let rockets = []; let last = performance.now();

    function resize(){
      W = canvas.width = Math.floor(innerWidth * DPR);
      H = canvas.height = Math.floor(innerHeight * DPR);
      canvas.style.width = innerWidth + 'px';
      canvas.style.height = innerHeight + 'px';
    }
    addEventListener('resize', resize); resize();

    function rand(n){return Math.random()*n}
    function hsl(h,s,l){return `hsl(${h} ${s}% ${l}%)`}

    function spawnRocket(x=rand(W), y=H, vx = (rand(2)-1)*0.3, vy = - (2 + rand(2))){
      rockets.push({x,y,vx,vy,life: 60 + Math.random()*40, hue: Math.random()*360});
    }
    function explode(x,y,hue){
      const count = 120;
      for(let k=0;k<count;k++){
        const ang = (k / count) * Math.PI*2; const speed = 1.2 + Math.random()*2.2;
        particles.push({x,y, vx: Math.cos(ang)*speed, vy: Math.sin(ang)*speed, life: 80+rand(30), hue: hue+rand(40)-20, alpha:1});
      }
    }
    function burst(x,y){ explode(x,y, Math.random()*360) }

    // Confetti burst (short-lived squares)
    function confetti(x,y){
      for(let k=0;k<160;k++){
        const ang = rand(Math.PI*2); const speed = 1+rand(3);
        const hues=[30,140,200,24,120,210];
        particles.push({x,y, vx: Math.cos(ang)*speed, vy: Math.sin(ang)*speed, life: 40+rand(20), hue: hues[Math.floor(rand(hues.length))], alpha:1, square:true});
      }
    }

    function step(ts){
      const dt = Math.min(32, ts-last); last = ts;
      ctx.clearRect(0,0,W,H);

      // Advance rockets
      for(let r=rockets.length-1;r>=0;r--){
        const a = rockets[r]; a.life -= dt*0.08; a.x += a.vx*dt; a.y += a.vy*dt; a.vy += 0.0025*dt; // gravity
        // trail
        ctx.beginPath(); ctx.arc(a.x, a.y, 3*DPR, 0, Math.PI*2);
        ctx.fillStyle = hsl(a.hue, 100, 70); ctx.fill();
        if(a.life <= 0 || a.vy>0){ explode(a.x,a.y,a.hue); rockets.splice(r,1); }
      }

      // Advance particles
      for(let p=particles.length-1;p>=0;p--){
        const a = particles[p]; a.life -= dt*0.06; a.x += a.vx*dt; a.y += a.vy*dt; a.vy += 0.004*dt; a.alpha = Math.max(0, a.life/110);
        ctx.save(); ctx.globalAlpha = Math.max(0, a.alpha);
        ctx.fillStyle = a.square ? hsl(a.hue,90,60) : hsl(a.hue,100,70);
        if(a.square){ ctx.fillRect(a.x-2*DPR,a.y-2*DPR,4*DPR,4*DPR); }
        else{ ctx.beginPath(); ctx.arc(a.x, a.y, 2.2*DPR, 0, Math.PI*2); ctx.fill(); }
        ctx.restore();
        if(a.life<=0||a.y>H+20){ particles.splice(p,1); }
      }

      requestAnimationFrame(step);
    }
    requestAnimationFrame(step);

    // Auto celebrations
    setInterval(()=>spawnRocket(rand(W*0.9)+W*0.05,H), 900);

    // Interactions
    addEventListener('click', e=>{
      const x = (e.clientX)*DPR; const y = (e.clientY)*DPR; burst(x,y);
    });

    const btnBurst = document.getElementById('burst');
    const btnConf = document.getElementById('confetti');
    btnBurst.addEventListener('click', ()=>{ burst(W*0.5, H*0.35); spawnRocket(W*0.3,H); spawnRocket(W*0.7,H); });
    btnConf.addEventListener('click', ()=>{ confetti(W*0.5, H*0.4); });

    // ===== Balloons =====
    const BL = document.getElementById('balloon-layer');
    const colors = ['var(--saffron)','var(--white)','var(--green)'];
    function addBalloon(){
      const b = document.createElement('div'); b.className='balloon';
      b.style.left = Math.round(Math.random()*100) + 'vw';
      b.style.background = colors[Math.floor(Math.random()*colors.length)];
      b.style.setProperty('--x', (Math.random()*.6 - .3)+'vw');
      b.style.setProperty('--t', (10 + Math.random()*8)+'s');
      BL.appendChild(b);
      setTimeout(()=>b.remove(), 18000);
    }

    document.getElementById('balloons').addEventListener('click', ()=>{
      for(let k=0;k<22;k++) setTimeout(addBalloon, k*150);
    });

    // Accessibility: keyboard triggers
    document.addEventListener('keydown', (e)=>{
      if(e.key==='f') spawnRocket();
      if(e.key==='c') confetti(W*0.5, H*0.4);
      if(e.key==='b') for(let k=0;k<18;k++) setTimeout(addBalloon, k*120);
    });

    // Respect reduced motion at runtime
    const mq = matchMedia('(prefers-reduced-motion: reduce)');
    if(mq.matches){
      // Stop spawns
      clearInterval();
    }
  </script>
  <audio id="anthem" src="Vande Mataram.mp3"></audio>

  <script>
    const anthem = document.getElementById('anthem');
    document.getElementById('confetti').addEventListener('click', () => {
      confetti(W * 0.5, H * 0.4);
      anthem.play();
    });
  </script>
</body>
</html>
